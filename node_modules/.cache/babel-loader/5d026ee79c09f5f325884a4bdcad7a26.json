{"ast":null,"code":"import { initializeApp } from 'firebase/app';\nimport { getDatabase, set, ref as dataRef, get, onValue } from 'firebase/database';\nimport { getDownloadURL, ref as storageRef, getStorage } from 'firebase/storage';\nconst config = {\n  apiKey: \"AIzaSyDSDL34m1WEKMonuecyPZqmwhn36yoYgr0\",\n  authDomain: \"find-pokemon-67226.firebaseapp.com\",\n  databaseURL: \"https://find-pokemon-67226-default-rtdb.firebaseio.com\",\n  projectId: \"find-pokemon-67226\",\n  storageBucket: \"find-pokemon-67226.appspot.com\",\n  messagingSenderId: \"532150975651\",\n  appId: \"1:532150975651:web:d7b7bb9c00a0e1181bd316\",\n  measurementId: \"G-TWGH46RDE4\"\n};\nconst firebaseApp = initializeApp(config);\nconst storage = getStorage(firebaseApp);\nconst database = getDatabase(firebaseApp);\nconst gsRef = storageRef(storage, 'gs://find-pokemon-67226.appspot.com');\nconst scoreRef = dataRef(database, 'high scores'); //249 pokemon, from ID 0-248\n\nfunction selectMons() {\n  let monIDs = [];\n  let monCalls = [];\n\n  for (let i = 0; i < 5; i++) {\n    monIDs.push(Math.floor(Math.random() * 249));\n    monCalls.push(get());\n  }\n\n  for (let mon in mons) {\n    mons[mon].call = get(dataRef(database, `pokemon/${mons[mon].id}`));\n  }\n\n  return Promise.all(mons).then(mons => {\n    let results = [];\n\n    for (let mon in mons) {\n      if (mons[mon].exists()) {\n        results.push({\n          id: mons[mon].id,\n          name: mons[mon].val()\n        });\n      }\n    }\n\n    return results;\n  }).catch(error => {\n    console.error(error);\n  });\n}\n\nfunction getPokePics(pokeList) {\n  let monPics = [];\n\n  for (let pokemon of pokeList) {\n    getDownloadURL(storageRef(gsRef, pokemon.name + '.png')).then(url => {\n      monPics.push({\n        id: pokemon.id,\n        src: url\n      });\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n\n  return monPics;\n}\n\nfunction updateScores(latestScore, scoreList) {\n  for (let score in scoreList) {\n    if (scoreList[score].score < latestScore.score) scoreList.splice(score, 1, latestScore, scoreList[score]);\n  }\n\n  scoreList.pop();\n  set(scoreRef, scoreList);\n  return scoreList;\n}\n\nfunction getScores() {\n  let scoreList;\n  onValue(scoreRef, snapshot => {\n    scoreList = snapshot.val();\n  });\n  return scoreList;\n} //check on this function\n\n\nfunction checkFound(pokeID, boxPos) {\n  let pokeCords;\n  get(dataRef(database, `pokemon/${pokeID}`)).then(snapshot => {\n    if (snapshot.exists()) {\n      pokeCords = snapshot.val().location;\n    }\n  }).catch(error => {\n    console.error(error);\n  });\n  let vertOverlap = Math.min(boxPos[1], pokeCords[1]) - Math.max(boxPos[0], pokeCords[0]);\n  let horizOverlap = Math.min(boxPos[3], pokeCords[3]) - Math.max(boxPos[2], pokeCords[2]);\n  let boxHeight = boxPos.top - boxPos.bottom;\n  let boxWidth = boxPos.right - boxPos.left;\n  if (vertOverlap * horizOverlap >= boxHeight * boxWidth / 2) return true;else return false;\n}\n\nexport { selectMons, getPokePics, updateScores, getScores, checkFound };","map":{"version":3,"sources":["/Users/tahaismail/web_projects/find_pokemon/src/firebase.js"],"names":["initializeApp","getDatabase","set","ref","dataRef","get","onValue","getDownloadURL","storageRef","getStorage","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseApp","storage","database","gsRef","scoreRef","selectMons","monIDs","monCalls","i","push","Math","floor","random","mon","mons","call","id","Promise","all","then","results","exists","name","val","catch","error","console","getPokePics","pokeList","monPics","pokemon","url","src","updateScores","latestScore","scoreList","score","splice","pop","getScores","snapshot","checkFound","pokeID","boxPos","pokeCords","location","vertOverlap","min","max","horizOverlap","boxHeight","top","bottom","boxWidth","right","left"],"mappings":"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","sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getDatabase, set, ref as dataRef, get, onValue } from 'firebase/database';\nimport { getDownloadURL, ref as storageRef, getStorage } from 'firebase/storage';\n\nconst config = {\n  apiKey: \"AIzaSyDSDL34m1WEKMonuecyPZqmwhn36yoYgr0\",\n  authDomain: \"find-pokemon-67226.firebaseapp.com\",\n  databaseURL: \"https://find-pokemon-67226-default-rtdb.firebaseio.com\",\n  projectId: \"find-pokemon-67226\",\n  storageBucket: \"find-pokemon-67226.appspot.com\",\n  messagingSenderId: \"532150975651\",\n  appId: \"1:532150975651:web:d7b7bb9c00a0e1181bd316\",\n  measurementId: \"G-TWGH46RDE4\"\n  };\n\nconst firebaseApp = initializeApp(config);\nconst storage = getStorage(firebaseApp);\nconst database = getDatabase(firebaseApp);\n\nconst gsRef = storageRef(storage, 'gs://find-pokemon-67226.appspot.com');\nconst scoreRef = dataRef(database, 'high scores');\n\n\n//249 pokemon, from ID 0-248\nfunction selectMons() {\n    let monIDs = [];\n    let monCalls = [];\n    for (let i = 0; i < 5; i++) {\n      monIDs.push(Math.floor(Math.random() * 249));\n      monCalls.push(get());\n    }\n      \n    \n   \n    for (let mon in mons) {\n      mons[mon].call = get(dataRef(database, `pokemon/${mons[mon].id}`));\n    }\n\n    return Promise.all(mons).then((mons) => {\n      let results = [];\n      for (let mon in mons) {\n        if (mons[mon].exists()) {\n          results.push({\n            id: mons[mon].id,\n            name: mons[mon].val()\n          })\n        }\n        \n      }\n      return results;\n    }).catch((error) => {\n      console.error(error);\n    });\n}\n\nfunction getPokePics(pokeList) {\n  let monPics = [];\n  for (let pokemon of pokeList) {\n    getDownloadURL(storageRef(gsRef, pokemon.name + '.png'))\n      .then((url) => {\n        monPics.push({\n          id: pokemon.id,\n          src: url\n        });\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  }\n  return monPics;\n}\n\nfunction updateScores (latestScore, scoreList) {\n  for (let score in scoreList) {\n    if (scoreList[score].score < latestScore.score) \n      scoreList.splice(score, 1, latestScore, scoreList[score]);\n  }\n  scoreList.pop();\n  set(scoreRef, scoreList);\n  return scoreList;\n}\n\nfunction getScores() {\n  let scoreList;\n  onValue(scoreRef, (snapshot) => {\n    scoreList = snapshot.val();\n  });\n  return scoreList;\n}\n\n\n//check on this function\nfunction checkFound(pokeID, boxPos) {\n  let pokeCords;\n  get(dataRef(database,`pokemon/${pokeID}`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      pokeCords = snapshot.val().location;\n    }\n  }).catch((error) => {\n    console.error(error);\n  });\n  let vertOverlap = Math.min(boxPos[1], pokeCords[1]) - Math.max(boxPos[0], pokeCords[0]);\n  let horizOverlap = Math.min(boxPos[3], pokeCords[3]) - Math.max(boxPos[2], pokeCords[2]);\n  let boxHeight = boxPos.top - boxPos.bottom;\n  let boxWidth = boxPos.right - boxPos.left;\n  if (vertOverlap * horizOverlap >= (boxHeight * boxWidth) / 2) return true;\n  else return false;\n}\n\n\nexport { selectMons, getPokePics, updateScores, getScores, checkFound }"]},"metadata":{},"sourceType":"module"}