{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tahaismail/web_projects/find_pokemon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tahaismail/web_projects/find_pokemon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tahaismail/web_projects/find_pokemon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useHistory,Link}from'react-router-dom';import{getScores,updateScores}from'./firebase';import ScoreCard from'./components/ScoreCard';import _ from'lodash';import msToTime from'./displayTime';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function End(){var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),curScores=_useState2[0],setCurScores=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),timeDisplay=_useState4[0],setTimeDisplay=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),highScoreMessage=_useState6[0],setHighScoreMessage=_useState6[1];useEffect(function(){var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var elapsedTime,playerName,displayTime,playerScore,prev,cur,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:elapsedTime=history.location.state.time;playerName=history.location.state.name;displayTime=msToTime(elapsedTime);playerScore={displayTime:displayTime,name:playerName,rawTime:elapsedTime};_context.next=6;return getScores();case 6:prev=_context.sent;cur=updateScores(playerScore,prev);message=_.isEqual(prev,cur)?null:/*#__PURE__*/_jsx(\"h3\",{children:\"Congratulations! Your time was quick enough to make the high score board!\"});setCurScores(cur);setTimeDisplay(displayTime);setHighScoreMessage(message);case 12:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();getData();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"You found all the Pokemon in\",' '+timeDisplay.slice(0,timeDisplay.indexOf(':'))+' ',\"minutes and\",' '+timeDisplay.slice(timeDisplay.indexOf(':')+1),\" seconds!\"]}),highScoreMessage,/*#__PURE__*/_jsx(\"h3\",{className:\"score-intro\",children:\"High Scores: \"}),/*#__PURE__*/_jsx(\"div\",{className:\"score-table\",children:curScores.map(function(scoreCard,index){return/*#__PURE__*/_jsxs(ScoreCard,{pName:scoreCard.name,pScore:scoreCard.displayTime,children:[\"key=\",index]});})}),/*#__PURE__*/_jsx(Link,{to:{pathname:'/'},className:\"again-link\",children:\"Click to play again\"})]});}export default End;","map":{"version":3,"sources":["/Users/tahaismail/web_projects/find_pokemon/src/End.js"],"names":["React","useEffect","useState","useHistory","Link","getScores","updateScores","ScoreCard","_","msToTime","End","history","curScores","setCurScores","timeDisplay","setTimeDisplay","highScoreMessage","setHighScoreMessage","getData","elapsedTime","location","state","time","playerName","name","displayTime","playerScore","rawTime","prev","cur","message","isEqual","slice","indexOf","map","scoreCard","index","pathname"],"mappings":"meAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,UAAT,CAAqBC,IAArB,KAAiC,kBAAjC,CACA,OAASC,SAAT,CAAoBC,YAApB,KAAwC,YAAxC,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,MAAOC,CAAAA,QAAP,KAAqB,eAArB,C,wFAEA,QAASC,CAAAA,GAAT,EAAe,CAEX,GAAMC,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CAFW,cAGqBD,QAAQ,CAAC,EAAD,CAH7B,wCAGNU,SAHM,eAGKC,YAHL,8BAIyBX,QAAQ,CAAC,EAAD,CAJjC,yCAINY,WAJM,eAIOC,cAJP,8BAKmCb,QAAQ,CAAC,IAAD,CAL3C,yCAKNc,gBALM,eAKYC,mBALZ,eAOXhB,SAAS,CAAC,UAAM,CACZ,GAAMiB,CAAAA,OAAO,0FAAG,uMACNC,WADM,CACQR,OAAO,CAACS,QAAR,CAAiBC,KAAjB,CAAuBC,IAD/B,CAENC,UAFM,CAEOZ,OAAO,CAACS,QAAR,CAAiBC,KAAjB,CAAuBG,IAF9B,CAGNC,WAHM,CAGQhB,QAAQ,CAACU,WAAD,CAHhB,CAINO,WAJM,CAIQ,CAAED,WAAW,CAAEA,WAAf,CAA4BD,IAAI,CAAED,UAAlC,CAA8CI,OAAO,CAAER,WAAvD,CAJR,uBAKOd,CAAAA,SAAS,EALhB,QAKNuB,IALM,eAMNC,GANM,CAMAvB,YAAY,CAACoB,WAAD,CAAcE,IAAd,CANZ,CAONE,OAPM,CAOKtB,CAAC,CAACuB,OAAF,CAAUH,IAAV,CAAgBC,GAAhB,CAAD,CAAyB,IAAzB,cAChB,iGARY,CASZhB,YAAY,CAACgB,GAAD,CAAZ,CACAd,cAAc,CAACU,WAAD,CAAd,CACAR,mBAAmB,CAACa,OAAD,CAAnB,CAXY,uDAAH,kBAAPZ,CAAAA,OAAO,0CAAb,CAaAA,OAAO,GACV,CAfQ,CAeN,EAfM,CAAT,CAkBA,mBACI,oCACI,qDACK,IAAMJ,WAAW,CAACkB,KAAZ,CAAkB,CAAlB,CAAqBlB,WAAW,CAACmB,OAAZ,CAAoB,GAApB,CAArB,CAAN,CAAuD,GAD5D,eAGK,IAAMnB,WAAW,CAACkB,KAAZ,CAAkBlB,WAAW,CAACmB,OAAZ,CAAoB,GAApB,EAA2B,CAA7C,CAHX,eADJ,CAKKjB,gBALL,cAMI,WAAI,SAAS,CAAC,aAAd,2BANJ,cAOI,YAAK,SAAS,CAAC,aAAf,UACCJ,SAAS,CAACsB,GAAV,CAAc,SAACC,SAAD,CAAYC,KAAZ,qBACX,MAAC,SAAD,EACI,KAAK,CAAED,SAAS,CAACX,IADrB,CAEI,MAAM,CAAEW,SAAS,CAACV,WAFtB,kBAGSW,KAHT,GADW,EAAd,CADD,EAPJ,cAgBI,KAAC,IAAD,EAAM,EAAE,CAAE,CACNC,QAAQ,CAAE,GADJ,CAAV,CAGI,SAAS,CAAC,YAHd,iCAhBJ,GADJ,CAuBH,CAID,cAAe3B,CAAAA,GAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useHistory, Link } from 'react-router-dom';\nimport { getScores, updateScores } from './firebase';\nimport ScoreCard from './components/ScoreCard'; \nimport _ from 'lodash';\nimport msToTime from './displayTime';\n\nfunction End() {\n\n    const history = useHistory();\n    let [curScores, setCurScores] = useState([])\n    let [timeDisplay, setTimeDisplay] = useState('');\n    let [highScoreMessage, setHighScoreMessage] = useState(null);\n  \n    useEffect(() => {\n        const getData = async () => {\n            const elapsedTime = history.location.state.time;\n            const playerName = history.location.state.name;\n            const displayTime = msToTime(elapsedTime)\n            const playerScore = { displayTime: displayTime, name: playerName, rawTime: elapsedTime }\n            const prev = await getScores();\n            const cur = updateScores(playerScore, prev);\n            const message = (_.isEqual(prev, cur)) ? null :\n            <h3>Congratulations! Your time was quick enough to make the high score board!</h3>\n            setCurScores(cur);\n            setTimeDisplay(displayTime);\n            setHighScoreMessage(message);\n        }\n        getData();\n    }, []);\n\n   \n    return (\n        <div>\n            <h2>You found all the Pokemon in \n                {' ' + timeDisplay.slice(0, timeDisplay.indexOf(':')) + ' '} \n                minutes and \n                {' ' + timeDisplay.slice(timeDisplay.indexOf(':') + 1)} seconds!</h2>\n            {highScoreMessage}\n            <h3 className='score-intro'>High Scores: </h3>\n            <div className='score-table'>\n            {curScores.map((scoreCard, index) => \n                <ScoreCard \n                    pName={scoreCard.name} \n                    pScore={scoreCard.displayTime}>\n                    key={index}\n                    </ScoreCard>)}\n            </div>\n            \n            <Link to={{\n                pathname: '/'\n                }}\n                className='again-link'>Click to play again</Link>\n        </div>\n    )\n}\n\n\n\nexport default End;\n"]},"metadata":{},"sourceType":"module"}