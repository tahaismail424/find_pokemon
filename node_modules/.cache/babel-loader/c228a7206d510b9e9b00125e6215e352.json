{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tahaismail/web_projects/find_pokemon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tahaismail/web_projects/find_pokemon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tahaismail/web_projects/find_pokemon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import{useHistory}from'react-router-dom';import pokePic from'./assets/pokemon_wallpaper.jpeg';import{selectMons,getPokePics,checkFound}from'./firebase';import PokeCard from'./components/PokeCard';import PokeView from'./components/PokeView';import msToTime from'./displayTime';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Game(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),foundPokes=_useState2[0],setFoundPokes=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),pickedPokemon=_useState4[0],setPickedPokemon=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),pokePics=_useState6[0],setPokePics=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),pokeCards=_useState8[0],setPokeCards=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),boxView=_useState10[0],setBoxView=_useState10[1];var startTime=useRef(Date.now());var history=useHistory();var name=history.location.state.name;useEffect(function(){var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var mons,pics,foundArray;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return selectMons();case 2:mons=_context.sent;_context.next=5;return getPokePics(mons);case 5:pics=_context.sent;foundArray=[{id:mons[0].id,found:false},{id:mons[1].id,found:false},{id:mons[2].id,found:false},{id:mons[3].id,found:false},{id:mons[4].id,found:false}];setPickedPokemon(mons);setFoundPokes(foundArray);setPokePics(pics);setPokeCards(pics.map(function(mon,index){return/*#__PURE__*/_jsx(PokeCard,{pokePic:mon.src,pokeName:mons[index].name,found:foundArray[index].found},index);}));case 11:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();getData();},[]);var selectArea=function selectArea(e){var boxWidth=90;var boxHeight=110;var parentPos=getPosition(e.target);var xPos=e.clientX-parentPos.x-boxWidth/2;var yPos=e.clientY-parentPos.y-boxHeight/2;setBoxView(/*#__PURE__*/_jsx(PokeView,{boxCords:[xPos,yPos],pokeList:pickedPokemon,foundPokes:foundPokes,foundFunction:updateFound}));};var updateFound=function updateFound(pokeID,boxCords){var found=checkFound(pokeID,boxCords);var index=foundPokes.map(function(poke){return poke.id;}).indexOf(pokeID);found.then(function(result){setBoxView(null);setFoundPokes(foundPokes.slice(0,index).concat([{id:pickedPokemon[index].id,found:result}]).concat(foundPokes.slice(index+1)));});};useEffect(function(){var totalFound=foundPokes.reduce(function(prev,cur){return prev+cur.found;},0);if(totalFound===5){history.push({pathname:'/end',state:{time:Date.now()-startTime.current,name:name}});}});useEffect(function(){setPokeCards(pokePics.map(function(mon,index){return/*#__PURE__*/_jsx(PokeCard,{pokePic:mon.src,pokeName:pickedPokemon[index].name,found:foundPokes[index].found},index);}));},[foundPokes,pickedPokemon,pokePics]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Pokemon to find:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"poke-box\",children:pokeCards}),/*#__PURE__*/_jsxs(\"div\",{className:\"game-box\",onClick:selectArea,children:[boxView,/*#__PURE__*/_jsx(\"img\",{src:pokePic,alt:\"pokemon-game\",className:\"big-poke-pic\"})]})]});}//borrowed from https://www.kirupa.com/snippets/move_element_to_click_position.htm\nfunction getPosition(element){var xPos=0;var yPos=0;while(element){if(element.tagName==='BODY'){var xScroll=element.scrollLeft||document.documentElement.scrollLeft;var yScroll=element.scrollTop||document.documentElement.scrollTop;xPos+=element.offsetLeft-xScroll+element.clientLeft;yPos+=element.offsetTop-yScroll+element.clientTop;}else{xPos+=element.offsetLeft-element.scrollLeft+element.clientLeft;yPos+=element.offsetTop-element.scrollTop+element.clientTop;}element=element.offsetParent;}return{x:xPos,y:yPos};}export default Game;","map":{"version":3,"sources":["/Users/tahaismail/web_projects/find_pokemon/src/Game.js"],"names":["React","useState","useEffect","useRef","useHistory","pokePic","selectMons","getPokePics","checkFound","PokeCard","PokeView","msToTime","Game","foundPokes","setFoundPokes","pickedPokemon","setPickedPokemon","pokePics","setPokePics","pokeCards","setPokeCards","boxView","setBoxView","startTime","Date","now","history","name","location","state","getData","mons","pics","foundArray","id","found","map","mon","index","src","selectArea","e","boxWidth","boxHeight","parentPos","getPosition","target","xPos","clientX","x","yPos","clientY","y","updateFound","pokeID","boxCords","poke","indexOf","then","result","slice","concat","totalFound","reduce","prev","cur","push","pathname","time","current","element","tagName","xScroll","scrollLeft","document","documentElement","yScroll","scrollTop","offsetLeft","clientLeft","offsetTop","clientTop","offsetParent"],"mappings":"meAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,MAArC,KAAmD,OAAnD,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,iCAApB,CACA,OAASC,UAAT,CAAqBC,WAArB,CAAkCC,UAAlC,KAAoD,YAApD,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,eAArB,C,wFAEA,QAASC,CAAAA,IAAT,EAAgB,eACsBX,QAAQ,CAAC,EAAD,CAD9B,wCACPY,UADO,eACKC,aADL,8BAE4Bb,QAAQ,CAAC,EAAD,CAFpC,yCAEPc,aAFO,eAEQC,gBAFR,8BAGmBf,QAAQ,CAAC,EAAD,CAH3B,yCAGPgB,QAHO,eAGGC,WAHH,8BAIoBjB,QAAQ,CAAC,IAAD,CAJ5B,yCAIPkB,SAJO,eAIIC,YAJJ,8BAKgBnB,QAAQ,CAAC,IAAD,CALxB,0CAKPoB,OALO,gBAKEC,UALF,gBAMZ,GAAMC,CAAAA,SAAS,CAAGpB,MAAM,CAACqB,IAAI,CAACC,GAAL,EAAD,CAAxB,CACA,GAAMC,CAAAA,OAAO,CAAGtB,UAAU,EAA1B,CACA,GAAMuB,CAAAA,IAAI,CAAGD,OAAO,CAACE,QAAR,CAAiBC,KAAjB,CAAuBF,IAApC,CAEAzB,SAAS,CAAC,UAAM,CACZ,GAAM4B,CAAAA,OAAO,0FAAG,kLACOxB,CAAAA,UAAU,EADjB,QACNyB,IADM,qCAEOxB,CAAAA,WAAW,CAACwB,IAAD,CAFlB,QAENC,IAFM,eAGNC,UAHM,CAGO,CACf,CACIC,EAAE,CAAEH,IAAI,CAAC,CAAD,CAAJ,CAAQG,EADhB,CAEIC,KAAK,CAAE,KAFX,CADe,CAKf,CACID,EAAE,CAAEH,IAAI,CAAC,CAAD,CAAJ,CAAQG,EADhB,CAEIC,KAAK,CAAE,KAFX,CALe,CASf,CACID,EAAE,CAAEH,IAAI,CAAC,CAAD,CAAJ,CAAQG,EADhB,CAEIC,KAAK,CAAE,KAFX,CATe,CAaf,CACID,EAAE,CAAEH,IAAI,CAAC,CAAD,CAAJ,CAAQG,EADhB,CAEIC,KAAK,CAAE,KAFX,CAbe,CAiBf,CACID,EAAE,CAAEH,IAAI,CAAC,CAAD,CAAJ,CAAQG,EADhB,CAEIC,KAAK,CAAE,KAFX,CAjBe,CAHP,CAyBZnB,gBAAgB,CAACe,IAAD,CAAhB,CACAjB,aAAa,CAACmB,UAAD,CAAb,CACAf,WAAW,CAACc,IAAD,CAAX,CACAZ,YAAY,CAACY,IAAI,CAACI,GAAL,CAAS,SAACC,GAAD,CAAMC,KAAN,qBAClB,KAAC,QAAD,EACI,OAAO,CAAED,GAAG,CAACE,GADjB,CAEI,QAAQ,CAAER,IAAI,CAACO,KAAD,CAAJ,CAAYX,IAF1B,CAGI,KAAK,CAAEM,UAAU,CAACK,KAAD,CAAV,CAAkBH,KAH7B,EAISG,KAJT,CADkB,EAAT,CAAD,CAAZ,CA5BY,uDAAH,kBAAPR,CAAAA,OAAO,0CAAb,CAoCAA,OAAO,GACV,CAtCQ,CAsCN,EAtCM,CAAT,CAwCA,GAAMU,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,CAAD,CAAO,CACtB,GAAMC,CAAAA,QAAQ,CAAG,EAAjB,CACA,GAAMC,CAAAA,SAAS,CAAG,GAAlB,CACA,GAAMC,CAAAA,SAAS,CAAGC,WAAW,CAACJ,CAAC,CAACK,MAAH,CAA7B,CACA,GAAMC,CAAAA,IAAI,CAAGN,CAAC,CAACO,OAAF,CAAYJ,SAAS,CAACK,CAAtB,CAA0BP,QAAQ,CAAG,CAAlD,CACA,GAAMQ,CAAAA,IAAI,CAAGT,CAAC,CAACU,OAAF,CAAYP,SAAS,CAACQ,CAAtB,CAA0BT,SAAS,CAAG,CAAnD,CACArB,UAAU,cACN,KAAC,QAAD,EACI,QAAQ,CAAE,CAACyB,IAAD,CAAOG,IAAP,CADd,CAEI,QAAQ,CAAEnC,aAFd,CAGI,UAAU,CAAEF,UAHhB,CAII,aAAa,CAAEwC,WAJnB,EADM,CAAV,CAQH,CAdD,CAgBA,GAAMA,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,MAAD,CAASC,QAAT,CAAsB,CACtC,GAAMpB,CAAAA,KAAK,CAAG3B,UAAU,CAAC8C,MAAD,CAASC,QAAT,CAAxB,CACA,GAAMjB,CAAAA,KAAK,CAAGzB,UAAU,CAACuB,GAAX,CAAe,SAACoB,IAAD,QAAUA,CAAAA,IAAI,CAACtB,EAAf,EAAf,EAAkCuB,OAAlC,CAA0CH,MAA1C,CAAd,CACAnB,KAAK,CAACuB,IAAN,CAAW,SAAAC,MAAM,CAAI,CACjBrC,UAAU,CAAC,IAAD,CAAV,CACAR,aAAa,CAACD,UAAU,CAAC+C,KAAX,CAAiB,CAAjB,CAAoBtB,KAApB,EACbuB,MADa,CACN,CAAC,CAAC3B,EAAE,CAAEnB,aAAa,CAACuB,KAAD,CAAb,CAAqBJ,EAA1B,CAA8BC,KAAK,CAAEwB,MAArC,CAAD,CADM,EAEbE,MAFa,CAENhD,UAAU,CAAC+C,KAAX,CAAiBtB,KAAK,CAAG,CAAzB,CAFM,CAAD,CAAb,CAGH,CALD,EAMH,CATD,CAWApC,SAAS,CAAC,UAAM,CACZ,GAAM4D,CAAAA,UAAU,CAAGjD,UAAU,CAACkD,MAAX,CAAkB,SAACC,IAAD,CAAOC,GAAP,QAAeD,CAAAA,IAAI,CAAGC,GAAG,CAAC9B,KAA1B,EAAlB,CAAmD,CAAnD,CAAnB,CACA,GAAI2B,UAAU,GAAK,CAAnB,CAAsB,CAClBpC,OAAO,CAACwC,IAAR,CAAa,CACTC,QAAQ,CAAE,MADD,CAETtC,KAAK,CAAE,CACHuC,IAAI,CAAE5C,IAAI,CAACC,GAAL,GAAaF,SAAS,CAAC8C,OAD1B,CAEH1C,IAAI,CAAEA,IAFH,CAFE,CAAb,EAOH,CACJ,CAXQ,CAAT,CAaAzB,SAAS,CAAC,UAAM,CACZkB,YAAY,CAACH,QAAQ,CAACmB,GAAT,CAAa,SAACC,GAAD,CAAMC,KAAN,qBAClB,KAAC,QAAD,EACI,OAAO,CAAED,GAAG,CAACE,GADjB,CAEI,QAAQ,CAAExB,aAAa,CAACuB,KAAD,CAAb,CAAqBX,IAFnC,CAGI,KAAK,CAAEd,UAAU,CAACyB,KAAD,CAAV,CAAkBH,KAH7B,EAISG,KAJT,CADkB,EAAb,CAAD,CAAZ,CAOH,CARQ,CAQN,CAACzB,UAAD,CAAaE,aAAb,CAA4BE,QAA5B,CARM,CAAT,CAUA,mBACI,oCACI,wCADJ,cAEI,YAAK,SAAS,CAAC,UAAf,UACKE,SADL,EAFJ,cAKI,aAAK,SAAS,CAAC,UAAf,CAA0B,OAAO,CAAEqB,UAAnC,WACKnB,OADL,cAEI,YACI,GAAG,CAAEhB,OADT,CAEI,GAAG,CAAC,cAFR,CAGI,SAAS,CAAC,cAHd,EAFJ,GALJ,GADJ,CAgBH,CAED;AACA,QAASwC,CAAAA,WAAT,CAAqByB,OAArB,CAA8B,CAC1B,GAAIvB,CAAAA,IAAI,CAAG,CAAX,CACA,GAAIG,CAAAA,IAAI,CAAG,CAAX,CAEA,MAAOoB,OAAP,CAAgB,CACZ,GAAIA,OAAO,CAACC,OAAR,GAAoB,MAAxB,CAAgC,CAC5B,GAAIC,CAAAA,OAAO,CAAGF,OAAO,CAACG,UAAR,EAAsBC,QAAQ,CAACC,eAAT,CAAyBF,UAA7D,CACA,GAAIG,CAAAA,OAAO,CAAGN,OAAO,CAACO,SAAR,EAAqBH,QAAQ,CAACC,eAAT,CAAyBE,SAA5D,CAEA9B,IAAI,EAAKuB,OAAO,CAACQ,UAAR,CAAqBN,OAArB,CAA+BF,OAAO,CAACS,UAAhD,CACA7B,IAAI,EAAKoB,OAAO,CAACU,SAAR,CAAoBJ,OAApB,CAA8BN,OAAO,CAACW,SAA/C,CACH,CAND,IAMO,CACHlC,IAAI,EAAKuB,OAAO,CAACQ,UAAR,CAAqBR,OAAO,CAACG,UAA7B,CAA0CH,OAAO,CAACS,UAA3D,CACA7B,IAAI,EAAKoB,OAAO,CAACU,SAAR,CAAoBV,OAAO,CAACO,SAA5B,CAAwCP,OAAO,CAACW,SAAzD,CACH,CACDX,OAAO,CAAGA,OAAO,CAACY,YAAlB,CACH,CACD,MAAO,CACHjC,CAAC,CAAEF,IADA,CAEHK,CAAC,CAAEF,IAFA,CAAP,CAIH,CAED,cAAetC,CAAAA,IAAf","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport pokePic from './assets/pokemon_wallpaper.jpeg';\nimport { selectMons, getPokePics, checkFound } from './firebase';\nimport PokeCard from './components/PokeCard';\nimport PokeView from './components/PokeView';\nimport msToTime from './displayTime';\n\nfunction Game() {\n    let [foundPokes, setFoundPokes] = useState([]);\n    let [pickedPokemon, setPickedPokemon] = useState([]);\n    let [pokePics, setPokePics]  = useState([]);\n    let [pokeCards, setPokeCards] = useState(null);\n    let [boxView, setBoxView] = useState(null);\n    const startTime = useRef(Date.now());\n    const history = useHistory();\n    const name = history.location.state.name;\n\n    useEffect(() => {\n        const getData = async () => {\n            const mons = await selectMons();\n            const pics = await getPokePics(mons);\n            const foundArray = [    \n                {\n                    id: mons[0].id,\n                    found: false\n                },\n                {\n                    id: mons[1].id,\n                    found: false\n                },\n                {\n                    id: mons[2].id,\n                    found: false \n                },\n                {\n                    id: mons[3].id,\n                    found: false  \n                },\n                {\n                    id: mons[4].id,\n                    found: false\n                }\n            ];\n            setPickedPokemon(mons);\n            setFoundPokes(foundArray);\n            setPokePics(pics);\n            setPokeCards(pics.map((mon, index) => \n                <PokeCard\n                    pokePic={mon.src}\n                    pokeName={mons[index].name}\n                    found={foundArray[index].found}\n                    key={index}\n                ></PokeCard>));\n        }\n        getData();\n    }, [])\n    \n    const selectArea = (e) => {\n        const boxWidth = 90;\n        const boxHeight = 110;\n        const parentPos = getPosition(e.target);\n        const xPos = e.clientX - parentPos.x - boxWidth / 2;\n        const yPos = e.clientY - parentPos.y - boxHeight / 2;\n        setBoxView(\n            <PokeView \n                boxCords={[xPos, yPos]}\n                pokeList={pickedPokemon}\n                foundPokes={foundPokes}\n                foundFunction={updateFound}>\n            </PokeView>\n        );\n    }\n\n    const updateFound = (pokeID, boxCords) => {\n        const found = checkFound(pokeID, boxCords);\n        const index = foundPokes.map((poke) => poke.id).indexOf(pokeID);\n        found.then(result => {\n            setBoxView(null);\n            setFoundPokes(foundPokes.slice(0, index)\n            .concat([{id: pickedPokemon[index].id, found: result}])\n            .concat(foundPokes.slice(index + 1)));\n        })\n    }\n\n    useEffect(() => {\n        const totalFound = foundPokes.reduce((prev, cur) => prev + cur.found, 0);\n        if (totalFound === 5) {\n            history.push({\n                pathname: '/end',\n                state: {\n                    time: Date.now() - startTime.current,\n                    name: name\n                }\n            });\n        }\n    })\n    \n    useEffect(() => {\n        setPokeCards(pokePics.map((mon, index) => \n                <PokeCard\n                    pokePic={mon.src}\n                    pokeName={pickedPokemon[index].name}\n                    found={foundPokes[index].found}\n                    key={index}\n                ></PokeCard>))\n    }, [foundPokes, pickedPokemon, pokePics])\n\n    return (\n        <div>\n            <h2>Pokemon to find:</h2>\n            <div className='poke-box'>\n                {pokeCards}\n            </div>\n            <div className='game-box' onClick={selectArea}>\n                {boxView}\n                <img \n                    src={pokePic} \n                    alt='pokemon-game' \n                    className='big-poke-pic'>\n                </img>\n            </div>\n        </div>\n    );\n}\n\n//borrowed from https://www.kirupa.com/snippets/move_element_to_click_position.htm\nfunction getPosition(element) {\n    let xPos = 0;\n    let yPos = 0;\n\n    while (element) {\n        if (element.tagName === 'BODY') {\n            let xScroll = element.scrollLeft || document.documentElement.scrollLeft;\n            let yScroll = element.scrollTop || document.documentElement.scrollTop;\n\n            xPos += (element.offsetLeft - xScroll + element.clientLeft);\n            yPos += (element.offsetTop - yScroll + element.clientTop);\n        } else {\n            xPos += (element.offsetLeft - element.scrollLeft + element.clientLeft);\n            yPos += (element.offsetTop - element.scrollTop + element.clientTop);\n        }\n        element = element.offsetParent;\n    }\n    return {\n        x: xPos,\n        y: yPos\n    };\n}\n\nexport default Game;\n"]},"metadata":{},"sourceType":"module"}