{"ast":null,"code":"var _jsxFileName = \"/Users/tahaismail/web_projects/find_pokemon/src/Game.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport pokePic from './assets/pokemon_wallpaper.jpeg';\nimport { selectMons, getPokePics, checkFound } from './firebase';\nimport PokeCard from './components/PokeCard';\nimport PokeView from './components/PokeView';\nimport msToTime from './displayTime';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Game() {\n  _s();\n\n  let [foundPokes, setFoundPokes] = useState([]);\n  let [currentBoxCords, setCurrentBoxCords] = useState(null);\n  let [pickedPokemon, setPickedPokemon] = useState([]);\n  let [pokePics, setPokePics] = useState([]);\n  let [pokeCards, setPokeCards] = useState(null);\n  let [boxView, setBoxView] = useState(null);\n  let [elapsedTime, setElapsedTime] = useState(0);\n  useEffect(() => {\n    const getData = async () => {\n      const mons = await selectMons();\n      const pics = await getPokePics(mons);\n      const foundArray = [{\n        id: mons[0].id,\n        found: false\n      }, {\n        id: mons[1].id,\n        found: false\n      }, {\n        id: mons[2].id,\n        found: false\n      }, {\n        id: mons[3].id,\n        found: false\n      }, {\n        id: mons[4].id,\n        found: false\n      }];\n      setPickedPokemon(mons);\n      setPokePics(pics);\n      setFoundPokes(foundArray);\n      setPokeCards(pics.map((mon, index) => /*#__PURE__*/_jsxDEV(PokeCard, {\n        pokePic: mon.src,\n        pokeName: mons[index].name,\n        found: foundArray[index].found\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this)));\n    };\n\n    getData();\n  }, []);\n  const history = useHistory();\n  const startTime = Date.now();\n  let timer = setInterval(() => {\n    setElapsedTime(msDate.now() - startTime);\n  }, 10000);\n  const name = history.location.state.name;\n\n  const selectArea = e => {\n    const boxWidth = 90;\n    const boxHeight = 110;\n    const parentPos = getPosition(e.target);\n    const xPos = e.clientX - parentPos.x - boxWidth / 2;\n    const yPos = e.clientY - parentPos.y - boxHeight / 2;\n    setCurrentBoxCords([xPos, yPos]);\n    setBoxView( /*#__PURE__*/_jsxDEV(PokeView, {\n      boxCords: [xPos, yPos],\n      pokeList: pickedPokemon,\n      foundPokes: foundPokes,\n      foundFunction: updateFound\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this));\n  };\n\n  const updateFound = async (pokeID, boxCords) => {\n    const found = await checkFound(pokeID, boxCords);\n    const index = foundPokes.map(poke => poke.id).indexOf(pokeID);\n    setFoundPokes(foundPokes.slice(0, index).concat([{\n      id: pickedPokemon[index].id,\n      found: found\n    }]).concat(foundPokes.slice(index + 1)));\n    setCurrentBoxCords(null);\n    setBoxView(null);\n  };\n\n  useEffect(() => {\n    const totalFound = foundPokes.reduce((prev, cur) => prev + cur.found, 0);\n\n    if (totalFound === 5) {\n      setElapsedTime(Date.now() - startTime);\n      history.push({\n        pathname: '/end',\n        state: {\n          time: elapsedTime,\n          name: name\n        }\n      });\n      return () => {\n        clearInterval(timer);\n      };\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Pokemon to find:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"poke-box\",\n      children: [pokeCards, msToTime(elapsedTime)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-box\",\n      onClick: selectArea,\n      children: [boxView, /*#__PURE__*/_jsxDEV(\"img\", {\n        src: pokePic,\n        alt: \"pokemon-game\",\n        className: \"big-poke-pic\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }, this);\n} //borrowed from https://www.kirupa.com/snippets/move_element_to_click_position.htm\n\n\n_s(Game, \"1c3vgKdiQk87GxulEhFKodfk1kE=\", false, function () {\n  return [useHistory];\n});\n\n_c = Game;\n\nfunction getPosition(element) {\n  let xPos = 0;\n  let yPos = 0;\n\n  while (element) {\n    if (element.tagName === 'BODY') {\n      let xScroll = element.scrollLeft || document.documentElement.scrollLeft;\n      let yScroll = element.scrollTop || document.documentElement.scrollTop;\n      xPos += element.offsetLeft - xScroll + element.clientLeft;\n      yPos += element.offsetTop - yScroll + element.clientTop;\n    } else {\n      xPos += element.offsetLeft - element.scrollLeft + element.clientLeft;\n      yPos += element.offsetTop - element.scrollTop + element.clientTop;\n    }\n\n    element = element.offsetParent;\n  }\n\n  return {\n    x: xPos,\n    y: yPos\n  };\n}\n\nexport default Game;\n\nvar _c;\n\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"sources":["/Users/tahaismail/web_projects/find_pokemon/src/Game.js"],"names":["React","useState","useEffect","useHistory","pokePic","selectMons","getPokePics","checkFound","PokeCard","PokeView","msToTime","Game","foundPokes","setFoundPokes","currentBoxCords","setCurrentBoxCords","pickedPokemon","setPickedPokemon","pokePics","setPokePics","pokeCards","setPokeCards","boxView","setBoxView","elapsedTime","setElapsedTime","getData","mons","pics","foundArray","id","found","map","mon","index","src","name","history","startTime","Date","now","timer","setInterval","msDate","location","state","selectArea","e","boxWidth","boxHeight","parentPos","getPosition","target","xPos","clientX","x","yPos","clientY","y","updateFound","pokeID","boxCords","poke","indexOf","slice","concat","totalFound","reduce","prev","cur","push","pathname","time","clearInterval","element","tagName","xScroll","scrollLeft","document","documentElement","yScroll","scrollTop","offsetLeft","clientLeft","offsetTop","clientTop","offsetParent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport pokePic from './assets/pokemon_wallpaper.jpeg';\nimport { selectMons, getPokePics, checkFound } from './firebase';\nimport PokeCard from './components/PokeCard';\nimport PokeView from './components/PokeView';\nimport msToTime from './displayTime';\n\nfunction Game() {\n    let [foundPokes, setFoundPokes] = useState([]);\n    let [currentBoxCords, setCurrentBoxCords] = useState(null);\n    let [pickedPokemon, setPickedPokemon] = useState([]);\n    let [pokePics, setPokePics] = useState([]);\n    let [pokeCards, setPokeCards] = useState(null);\n    let [boxView, setBoxView] = useState(null);\n    let [elapsedTime, setElapsedTime] = useState(0);\n\n    useEffect(() => {\n        const getData = async () => {\n            const mons = await selectMons();\n            const pics = await getPokePics(mons);\n            const foundArray = [    \n                {\n                    id: mons[0].id,\n                    found: false\n                },\n                {\n                    id: mons[1].id,\n                    found: false\n                },\n                {\n                    id: mons[2].id,\n                    found: false \n                },\n                {\n                    id: mons[3].id,\n                    found: false  \n                },\n                {\n                    id: mons[4].id,\n                    found: false\n                }\n            ];\n            setPickedPokemon(mons);\n            setPokePics(pics);\n            setFoundPokes(foundArray);\n            setPokeCards(pics.map((mon, index) => \n                <PokeCard\n                    pokePic={mon.src}\n                    pokeName={mons[index].name}\n                    found={foundArray[index].found}\n                    key={index}\n                ></PokeCard>));\n        }\n        getData();\n    }, [])\n    \n    const history = useHistory();\n    const startTime = Date.now();\n    let timer = setInterval(() => {setElapsedTime(msDate.now() - startTime)}, 10000);\n    \n    const name = history.location.state.name;\n    \n    const selectArea = (e) => {\n        const boxWidth = 90;\n        const boxHeight = 110;\n        const parentPos = getPosition(e.target);\n        const xPos = e.clientX - parentPos.x - boxWidth / 2;\n        const yPos = e.clientY - parentPos.y - boxHeight / 2;\n        setCurrentBoxCords([xPos, yPos]);\n        setBoxView(\n            <PokeView \n                boxCords={[xPos, yPos]}\n                pokeList={pickedPokemon}\n                foundPokes={foundPokes}\n                foundFunction={updateFound}>\n            </PokeView>\n        );\n    }\n\n    const updateFound = async (pokeID, boxCords) => {\n        const found = await checkFound(pokeID, boxCords);\n        const index = foundPokes.map((poke) => poke.id).indexOf(pokeID);\n        setFoundPokes(foundPokes.slice(0, index)\n            .concat([{id: pickedPokemon[index].id, found: found}])\n            .concat(foundPokes.slice(index + 1)));\n        setCurrentBoxCords(null);\n        setBoxView(null);\n    }\n\n    useEffect(() => {\n        const totalFound = foundPokes.reduce((prev, cur) => prev + cur.found, 0);\n        if (totalFound === 5) {\n            setElapsedTime(Date.now() - startTime);\n            history.push({\n                pathname: '/end',\n                state: {\n                    time: elapsedTime,\n                    name: name\n                }\n            });\n            return (() => {clearInterval(timer)}) ;\n        }\n    })\n\n    return (\n        <div>\n            <h2>Pokemon to find:</h2>\n            <div className='poke-box'>\n                {pokeCards}\n                {msToTime(elapsedTime)}\n            </div>\n            <div className='game-box' onClick={selectArea}>\n                {boxView}\n                <img \n                    src={pokePic} \n                    alt='pokemon-game' \n                    className='big-poke-pic'>\n                </img>\n            </div>\n        </div>\n    );\n}\n\n//borrowed from https://www.kirupa.com/snippets/move_element_to_click_position.htm\nfunction getPosition(element) {\n    let xPos = 0;\n    let yPos = 0;\n\n    while (element) {\n        if (element.tagName === 'BODY') {\n            let xScroll = element.scrollLeft || document.documentElement.scrollLeft;\n            let yScroll = element.scrollTop || document.documentElement.scrollTop;\n\n            xPos += (element.offsetLeft - xScroll + element.clientLeft);\n            yPos += (element.offsetTop - yScroll + element.clientTop);\n        } else {\n            xPos += (element.offsetLeft - element.scrollLeft + element.clientLeft);\n            yPos += (element.offsetTop - element.scrollTop + element.clientTop);\n        }\n        element = element.offsetParent;\n    }\n    return {\n        x: xPos,\n        y: yPos\n    };\n}\n\nexport default Game;\n"]},"metadata":{},"sourceType":"module"}