{"ast":null,"code":"import { initializeApp } from 'firebase/app';\nimport { getDatabase, set, ref as dataRef, get, onValue } from 'firebase/database';\nimport { getDownloadURL, ref as storageRef, getStorage } from 'firebase/storage';\nconst config = {\n  apiKey: \"AIzaSyDSDL34m1WEKMonuecyPZqmwhn36yoYgr0\",\n  authDomain: \"find-pokemon-67226.firebaseapp.com\",\n  databaseURL: \"https://find-pokemon-67226-default-rtdb.firebaseio.com\",\n  projectId: \"find-pokemon-67226\",\n  storageBucket: \"find-pokemon-67226.appspot.com\",\n  messagingSenderId: \"532150975651\",\n  appId: \"1:532150975651:web:d7b7bb9c00a0e1181bd316\",\n  measurementId: \"G-TWGH46RDE4\"\n};\nconst firebaseApp = initializeApp(config);\nconst storage = getStorage(firebaseApp);\nconst database = getDatabase(firebaseApp);\nconst gsRef = storageRef(storage, 'gs://find-pokemon-67226.appspot.com');\nconst scoreRef = dataRef(database, 'high scores'); //249 pokemon, from ID 0-248\n\nfunction selectMons() {\n  let mons = [];\n\n  for (let i = 0; i < 5; i++) mons.push({\n    id: Math.floor(Math.random() * 249),\n    call: ''\n  });\n\n  for (let mon in mons) {\n    mons[mon].name = get(dataRef(database, `pokemon/${mons[mon].id}`));\n    get(dataRef(database, `pokemon/${mons[mon].id}`)).then(snapshot => {\n      if (snapshot.exists()) {\n        mons[mon].name = snapshot.val().name;\n      }\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n\n  return Promise.all(mons).then(mons => {\n    let results = [];\n\n    for (let mon in mons) {\n      if (mons[mon].exists()) {\n        results.push({\n          id: mons[mon].id,\n          name: mons[mon].val()\n        });\n      }\n    }\n\n    return results;\n  }).catch(error => {\n    console.error(error);\n  });\n}\n\nfunction getPokePics(pokeList) {\n  let monPics = [];\n\n  for (let pokemon of pokeList) {\n    getDownloadURL(storageRef(gsRef, pokemon.name + '.png')).then(url => {\n      monPics.push({\n        id: pokemon.id,\n        src: url\n      });\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n\n  return monPics;\n}\n\nfunction updateScores(latestScore, scoreList) {\n  for (let score in scoreList) {\n    if (scoreList[score].score < latestScore.score) scoreList.splice(score, 1, latestScore, scoreList[score]);\n  }\n\n  scoreList.pop();\n  set(scoreRef, scoreList);\n  return scoreList;\n}\n\nfunction getScores() {\n  let scoreList;\n  onValue(scoreRef, snapshot => {\n    scoreList = snapshot.val();\n  });\n  return scoreList;\n} //check on this function\n\n\nfunction checkFound(pokeID, boxPos) {\n  let pokeCords;\n  get(dataRef(database, `pokemon/${pokeID}`)).then(snapshot => {\n    if (snapshot.exists()) {\n      pokeCords = snapshot.val().location;\n    }\n  }).catch(error => {\n    console.error(error);\n  });\n  let vertOverlap = Math.min(boxPos[1], pokeCords[1]) - Math.max(boxPos[0], pokeCords[0]);\n  let horizOverlap = Math.min(boxPos[3], pokeCords[3]) - Math.max(boxPos[2], pokeCords[2]);\n  let boxHeight = boxPos.top - boxPos.bottom;\n  let boxWidth = boxPos.right - boxPos.left;\n  if (vertOverlap * horizOverlap >= boxHeight * boxWidth / 2) return true;else return false;\n}\n\nexport { selectMons, getPokePics, updateScores, getScores, checkFound };","map":{"version":3,"sources":["/Users/tahaismail/web_projects/find_pokemon/src/firebase.js"],"names":["initializeApp","getDatabase","set","ref","dataRef","get","onValue","getDownloadURL","storageRef","getStorage","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseApp","storage","database","gsRef","scoreRef","selectMons","mons","i","push","id","Math","floor","random","call","mon","name","then","snapshot","exists","val","catch","error","console","Promise","all","results","getPokePics","pokeList","monPics","pokemon","url","src","updateScores","latestScore","scoreList","score","splice","pop","getScores","checkFound","pokeID","boxPos","pokeCords","location","vertOverlap","min","max","horizOverlap","boxHeight","top","bottom","boxWidth","right","left"],"mappings":"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","sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getDatabase, set, ref as dataRef, get, onValue } from 'firebase/database';\nimport { getDownloadURL, ref as storageRef, getStorage } from 'firebase/storage';\n\nconst config = {\n  apiKey: \"AIzaSyDSDL34m1WEKMonuecyPZqmwhn36yoYgr0\",\n  authDomain: \"find-pokemon-67226.firebaseapp.com\",\n  databaseURL: \"https://find-pokemon-67226-default-rtdb.firebaseio.com\",\n  projectId: \"find-pokemon-67226\",\n  storageBucket: \"find-pokemon-67226.appspot.com\",\n  messagingSenderId: \"532150975651\",\n  appId: \"1:532150975651:web:d7b7bb9c00a0e1181bd316\",\n  measurementId: \"G-TWGH46RDE4\"\n  };\n\nconst firebaseApp = initializeApp(config);\nconst storage = getStorage(firebaseApp);\nconst database = getDatabase(firebaseApp);\n\nconst gsRef = storageRef(storage, 'gs://find-pokemon-67226.appspot.com');\nconst scoreRef = dataRef(database, 'high scores');\n\n\n//249 pokemon, from ID 0-248\nfunction selectMons() {\n    let mons = [];\n    for (let i = 0; i < 5; i++) mons.push({\n      id: Math.floor(Math.random() * 249),\n      call: ''\n      });\n    for (let mon in mons) {\n      mons[mon].name = get(dataRef(database, `pokemon/${mons[mon].id}`));\n\n      get(dataRef(database, `pokemon/${mons[mon].id}`)).then((snapshot) => {\n        if (snapshot.exists()) {\n          mons[mon].name = snapshot.val().name;\n        }\n      }).catch((error) => {\n        console.error(error);\n      });\n    }\n    return Promise.all(mons).then((mons) => {\n      let results = [];\n      for (let mon in mons) {\n        if (mons[mon].exists()) {\n          results.push({\n            id: mons[mon].id,\n            name: mons[mon].val()\n          })\n        }\n        \n      }\n      return results;\n    }).catch((error) => {\n      console.error(error);\n    });\n}\n\nfunction getPokePics(pokeList) {\n  let monPics = [];\n  for (let pokemon of pokeList) {\n    getDownloadURL(storageRef(gsRef, pokemon.name + '.png'))\n      .then((url) => {\n        monPics.push({\n          id: pokemon.id,\n          src: url\n        });\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  }\n  return monPics;\n}\n\nfunction updateScores (latestScore, scoreList) {\n  for (let score in scoreList) {\n    if (scoreList[score].score < latestScore.score) \n      scoreList.splice(score, 1, latestScore, scoreList[score]);\n  }\n  scoreList.pop();\n  set(scoreRef, scoreList);\n  return scoreList;\n}\n\nfunction getScores() {\n  let scoreList;\n  onValue(scoreRef, (snapshot) => {\n    scoreList = snapshot.val();\n  });\n  return scoreList;\n}\n\n\n//check on this function\nfunction checkFound(pokeID, boxPos) {\n  let pokeCords;\n  get(dataRef(database,`pokemon/${pokeID}`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      pokeCords = snapshot.val().location;\n    }\n  }).catch((error) => {\n    console.error(error);\n  });\n  let vertOverlap = Math.min(boxPos[1], pokeCords[1]) - Math.max(boxPos[0], pokeCords[0]);\n  let horizOverlap = Math.min(boxPos[3], pokeCords[3]) - Math.max(boxPos[2], pokeCords[2]);\n  let boxHeight = boxPos.top - boxPos.bottom;\n  let boxWidth = boxPos.right - boxPos.left;\n  if (vertOverlap * horizOverlap >= (boxHeight * boxWidth) / 2) return true;\n  else return false;\n}\n\n\nexport { selectMons, getPokePics, updateScores, getScores, checkFound }"]},"metadata":{},"sourceType":"module"}